[{"D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\owner\\my-restaurants.tsx":"1","D:\\project_javascript\\nuber-eats-frontend\\src\\__generated__\\globalTypes.ts":"2","D:\\project_javascript\\nuber-eats-frontend\\src\\routers\\logged-in-router.tsx":"3","D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\owner\\add-restaurants.tsx":"4","D:\\project_javascript\\nuber-eats-frontend\\src\\index.tsx":"5","D:\\project_javascript\\nuber-eats-frontend\\src\\components\\header.tsx":"6","D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\client\\restaurants.tsx":"7","D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\404.tsx":"8","D:\\project_javascript\\nuber-eats-frontend\\src\\hooks\\useMe.tsx":"9","D:\\project_javascript\\nuber-eats-frontend\\src\\fragments.ts":"10","D:\\project_javascript\\nuber-eats-frontend\\src\\components\\form-error.tsx":"11","D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\client\\search.tsx":"12","D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\user\\edit-profile.tsx":"13","D:\\project_javascript\\nuber-eats-frontend\\src\\components\\button.tsx":"14","D:\\project_javascript\\nuber-eats-frontend\\src\\constants.ts":"15","D:\\project_javascript\\nuber-eats-frontend\\src\\apollo.ts":"16","D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\create-account.tsx":"17","D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\client\\category.tsx":"18","D:\\project_javascript\\nuber-eats-frontend\\src\\routers\\logged-out-router.tsx":"19"},{"size":1191,"mtime":1615161226678,"results":"20","hashOfConfig":"21"},{"size":1270,"mtime":1615247142137,"results":"22","hashOfConfig":"21"},{"size":2390,"mtime":1615161037367,"results":"23","hashOfConfig":"21"},{"size":3491,"mtime":1615505451363,"results":"24","hashOfConfig":"21"},{"size":770,"mtime":1613690735085,"results":"25","hashOfConfig":"21"},{"size":1054,"mtime":1614901300008,"results":"26","hashOfConfig":"21"},{"size":4349,"mtime":1613603509598,"results":"27","hashOfConfig":"21"},{"size":644,"mtime":1613517341071,"results":"28","hashOfConfig":"21"},{"size":305,"mtime":1613951097421,"results":"29","hashOfConfig":"21"},{"size":652,"mtime":1613519461091,"results":"30","hashOfConfig":"21"},{"size":285,"mtime":1614123692957,"results":"31","hashOfConfig":"21"},{"size":1564,"mtime":1613518476186,"results":"32","hashOfConfig":"21"},{"size":3614,"mtime":1613517330402,"results":"33","hashOfConfig":"21"},{"size":566,"mtime":1614210032025,"results":"34","hashOfConfig":"21"},{"size":44,"mtime":1614294956804,"results":"35","hashOfConfig":"21"},{"size":1532,"mtime":1614901190603,"results":"36","hashOfConfig":"21"},{"size":4599,"mtime":1614640887879,"results":"37","hashOfConfig":"21"},{"size":1224,"mtime":1613603606876,"results":"38","hashOfConfig":"21"},{"size":594,"mtime":1613690601161,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"r4q80p",{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"59"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"66","messages":"67","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"59"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"77","messages":"78","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\owner\\my-restaurants.tsx",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\__generated__\\globalTypes.ts",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\routers\\logged-in-router.tsx",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\owner\\add-restaurants.tsx",["81","82","83"],"D:\\project_javascript\\nuber-eats-frontend\\src\\index.tsx",[],["84","85"],"D:\\project_javascript\\nuber-eats-frontend\\src\\components\\header.tsx",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\client\\restaurants.tsx",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\404.tsx",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\hooks\\useMe.tsx",[],["86","87"],"D:\\project_javascript\\nuber-eats-frontend\\src\\fragments.ts",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\components\\form-error.tsx",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\client\\search.tsx",["88","89"],"D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\user\\edit-profile.tsx",["90","91","92","93"],"import { gql, useApolloClient, useMutation } from \"@apollo/client\";\r\nimport React from \"react\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Button } from \"../../components/button\";\r\nimport { useMe } from \"../../hooks/useMe\";\r\nimport {\r\n  editProfile,\r\n  editProfileVariables,\r\n} from \"../../__generated__/editProfile\";\r\n\r\nconst EDIT_PROFILE_MUTATION = gql`\r\n  mutation editProfile($input: EditProfileInput!) {\r\n    editProfile(input: $input) {\r\n      ok\r\n      error\r\n    }\r\n  }\r\n`;\r\ninterface IFormProps {\r\n  email?: string;\r\n  password?: string;\r\n}\r\n\r\nexport const EditProfile = () => {\r\n  const { data: userData, refetch: refreshUser } = useMe();\r\n  const client = useApolloClient();\r\n\r\n  const onCompleted = async (data: editProfile) => {\r\n    const {\r\n      editProfile: { error, ok },\r\n    } = data;\r\n\r\n    if (ok && userData) {\r\n      //await refreshUser();\r\n      //속도를 위해 Refetch대신 Fragment 사용하였음\r\n      const {\r\n        me: { email: prevEmail, id },\r\n      } = userData;\r\n      const { email: newEmail } = getValues();\r\n\r\n      if (prevEmail !== newEmail) {\r\n        //update the cache\r\n        /*\r\n        write data to cache directly through 'writeFragment'\r\n        fragment는 type의 일종임\r\n        id를 가지고 cache에 있는 fragment를 찾을 수 있음\r\n\r\n        아래 구문은 type이 User인 fragment중 id 가 User:${userData.me.id}인 것을 찾고\r\n        찾은 fragment의 데이터중 email을 바꾸는 내용임\r\n\r\n        (Chrome의 개발자 도구중 Apollo탭에서 cache로 가면 fragment들을 볼 수 있음)\r\n      */\r\n        client.writeFragment({\r\n          id: `User:${id}`,\r\n          fragment: gql`\r\n            fragment EditedUser on User {\r\n              verified\r\n              email\r\n            }\r\n          `,\r\n          data: {\r\n            verified: false,\r\n            email: newEmail,\r\n          },\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const [editProfile, { loading }] = useMutation<\r\n    editProfile,\r\n    editProfileVariables\r\n  >(EDIT_PROFILE_MUTATION, {\r\n    onCompleted,\r\n  });\r\n\r\n  const { register, handleSubmit, getValues, formState } = useForm<IFormProps>({\r\n    mode: \"onChange\",\r\n    defaultValues: {\r\n      email: userData?.me.email,\r\n    },\r\n  });\r\n  const onSubmit = () => {\r\n    const { email, password } = getValues();\r\n\r\n    editProfile({\r\n      variables: {\r\n        input: {\r\n          email,\r\n          ...(password !== \"\" && { password }),\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-52 flex flex-col justify-center items-center\">\r\n      <Helmet>\r\n        <title>Edit Profile | Nuber Eats</title>\r\n      </Helmet>\r\n      <h4 className=\"font-semibold text-2xl mb-3\">Edit Profile</h4>\r\n      <form\r\n        className=\"grid max-w-screen-sm gap-3 mt-5 w-full mb-5\"\r\n        onSubmit={handleSubmit(onSubmit)}\r\n      >\r\n        <input\r\n          ref={register({\r\n            pattern: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\r\n          })}\r\n          className=\"input\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n        />\r\n        <input\r\n          ref={register()}\r\n          className=\"input\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n        />\r\n        <Button\r\n          loading={loading}\r\n          canClick={formState.isValid}\r\n          actionText=\"Save Profile\"\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n","D:\\project_javascript\\nuber-eats-frontend\\src\\components\\button.tsx",["94"],"D:\\project_javascript\\nuber-eats-frontend\\src\\constants.ts",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\apollo.ts",[],"D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\create-account.tsx",["95","96","97","98","99","100"],"D:\\project_javascript\\nuber-eats-frontend\\src\\pages\\client\\category.tsx",["101","102","103"],"D:\\project_javascript\\nuber-eats-frontend\\src\\routers\\logged-out-router.tsx",[],{"ruleId":"104","severity":1,"message":"105","line":31,"column":31,"nodeType":"106","messageId":"107","endLine":31,"endColumn":36},{"ruleId":"104","severity":1,"message":"108","line":39,"column":38,"nodeType":"106","messageId":"107","endLine":39,"endColumn":45},{"ruleId":"104","severity":1,"message":"109","line":50,"column":5,"nodeType":"106","messageId":"107","endLine":50,"endColumn":11},{"ruleId":"110","replacedBy":"111"},{"ruleId":"112","replacedBy":"113"},{"ruleId":"110","replacedBy":"114"},{"ruleId":"112","replacedBy":"115"},{"ruleId":"104","severity":1,"message":"116","line":35,"column":12,"nodeType":"106","messageId":"107","endLine":35,"endColumn":13},{"ruleId":"117","severity":1,"message":"118","line":49,"column":6,"nodeType":"119","endLine":49,"endColumn":25,"suggestions":"120"},{"ruleId":"104","severity":1,"message":"121","line":26,"column":36,"nodeType":"106","messageId":"107","endLine":26,"endColumn":47},{"ruleId":"104","severity":1,"message":"105","line":31,"column":22,"nodeType":"106","messageId":"107","endLine":31,"endColumn":27},{"ruleId":"122","severity":1,"message":"123","line":109,"column":32,"nodeType":"124","messageId":"125","endLine":109,"endColumn":33,"suggestions":"126"},{"ruleId":"122","severity":1,"message":"123","line":109,"column":57,"nodeType":"124","messageId":"125","endLine":109,"endColumn":58,"suggestions":"127"},{"ruleId":"128","severity":1,"message":"129","line":15,"column":5,"nodeType":"130","endLine":22,"endColumn":6},{"ruleId":"104","severity":1,"message":"131","line":36,"column":5,"nodeType":"106","messageId":"107","endLine":36,"endColumn":10},{"ruleId":"104","severity":1,"message":"105","line":48,"column":28,"nodeType":"106","messageId":"107","endLine":48,"endColumn":33},{"ruleId":"104","severity":1,"message":"105","line":60,"column":16,"nodeType":"106","messageId":"107","endLine":60,"endColumn":21},{"ruleId":"132","severity":1,"message":"133","line":89,"column":9,"nodeType":"130","endLine":89,"endColumn":54},{"ruleId":"122","severity":1,"message":"123","line":100,"column":34,"nodeType":"124","messageId":"125","endLine":100,"endColumn":35,"suggestions":"134"},{"ruleId":"122","severity":1,"message":"123","line":100,"column":59,"nodeType":"124","messageId":"125","endLine":100,"endColumn":60,"suggestions":"135"},{"ruleId":"104","severity":1,"message":"136","line":2,"column":17,"nodeType":"106","messageId":"107","endLine":2,"endColumn":26},{"ruleId":"104","severity":1,"message":"137","line":3,"column":10,"nodeType":"106","messageId":"107","endLine":3,"endColumn":16},{"ruleId":"104","severity":1,"message":"108","line":36,"column":17,"nodeType":"106","messageId":"107","endLine":36,"endColumn":24},"@typescript-eslint/no-unused-vars","'error' is assigned a value but never used.","Identifier","unusedVar","'loading' is assigned a value but never used.","'errors' is assigned a value but never used.","no-native-reassign",["138"],"no-negated-in-lhs",["139"],["138"],["139"],"'_' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'callQuery'. Either include it or remove the dependency array.","ArrayExpression",["140"],"'refreshUser' is assigned a value but never used.","no-useless-escape","Unnecessary escape character: \\[.","Literal","unnecessaryEscape",["141","142"],["143","144"],"jsx-a11y/no-redundant-roles","The element button has an implicit role of button. Defining this explicitly is redundant and should be avoided.","JSXOpeningElement","'watch' is assigned a value but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.",["145","146"],["147","148"],"'useEffect' is defined but never used.","'Helmet' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"149","fix":"150"},{"messageId":"151","fix":"152","desc":"153"},{"messageId":"154","fix":"155","desc":"156"},{"messageId":"151","fix":"157","desc":"153"},{"messageId":"154","fix":"158","desc":"156"},{"messageId":"151","fix":"159","desc":"153"},{"messageId":"154","fix":"160","desc":"156"},{"messageId":"151","fix":"161","desc":"153"},{"messageId":"154","fix":"162","desc":"156"},"Update the dependencies array to be: [callQuery, history, location]",{"range":"163","text":"164"},"removeEscape",{"range":"165","text":"166"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"167","text":"168"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"169","text":"166"},{"range":"170","text":"168"},{"range":"171","text":"166"},{"range":"172","text":"168"},{"range":"173","text":"166"},{"range":"174","text":"168"},[1280,1299],"[callQuery, history, location]",[2835,2836],"",[2835,2835],"\\",[2860,2861],[2860,2860],[2641,2642],[2641,2641],[2666,2667],[2666,2666]]